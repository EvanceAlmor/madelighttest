/*! For license information please see tinkoff.js.LICENSE.txt */
(()=>{var e={910:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FmsLogLevelEnum=void 0,function(e){e.FATAL="FATAL",e.ERROR="ERROR",e.WARN="WARN",e.INFO="INFO",e.DEBUG="DEBUG",e.TRACE="TRACE"}(t.FmsLogLevelEnum||(t.FmsLogLevelEnum={}))},425:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FmsProjectEnum=void 0,function(e){e.MPF2="EACQ-MAPI-PAY-FORM",e.MPF_IE="EACQ-MAPI-PAY-FORM-IE",e.MPA3="EACQ-MPA",e.MMS2="EACQ-MMS",e.TINKOFFJS="EACQ-TINKOFF-JS",e.E2C="EACQ-E2C",e.MMS_SALES="EACQ-MMS-SALES",e.LK2="EACQ-LK2"}(t.FmsProjectEnum||(t.FmsProjectEnum={}))},166:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDynamicMetricRecord=void 0;var r=n(160),o=n(161);t.createDynamicMetricRecord=function(e,t,n){void 0===n&&(n=!1);try{n?r.createHttpRequestOld(e,t,"create/metric"):o.createHttpRequest(e,t,"create/metric")}catch(e){}}},160:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHttpRequestOld=void 0,t.createHttpRequestOld=function(e,t,n){void 0===n&&(n="create/log");var r=new XMLHttpRequest;r.open("POST",e+n),r.setRequestHeader("Content-type","application/json; charset=utf-8"),r.responseType="text",r.send(JSON.stringify(t))}},161:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHttpRequest=void 0,t.createHttpRequest=function(e,t,n){return void 0===n&&(n="create/log"),fetch(e+n,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)})}},705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLogRecordPromise=void 0;var r=n(161);t.createLogRecordPromise=function(e,t){try{return r.createHttpRequest(e,t)}catch(e){return Promise.resolve(null)}}},377:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLogRecord=void 0;var r=n(161),o=n(160);t.createLogRecord=function(e,t,n){try{n?o.createHttpRequestOld(e,t):r.createHttpRequest(e,t)}catch(e){}}},344:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(910),t),o(n(425),t),o(n(4),t),o(n(211),t),o(n(18),t),o(n(377),t),o(n(705),t),o(n(166),t)},211:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},18:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},669:(e,t,n)=>{e.exports=n(609)},448:(e,t,n)=>{"use strict";var r=n(867),o=n(26),i=n(372),a=n(327),s=n(97),u=n(109),c=n(985),l=n(61);e.exports=function(e){return new Promise((function(t,n){var d=e.data,f=e.headers,p=e.responseType;r.isFormData(d)&&delete f["Content-Type"];var m=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",y=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.Authorization="Basic "+btoa(h+":"+y)}var g=s(e.baseURL,e.url);function v(){if(m){var r="getAllResponseHeaders"in m?u(m.getAllResponseHeaders()):null,i={data:p&&"text"!==p&&"json"!==p?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m};o(t,n,i),m=null}}if(m.open(e.method.toUpperCase(),a(g,e.params,e.paramsSerializer),!0),m.timeout=e.timeout,"onloadend"in m?m.onloadend=v:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(v)},m.onabort=function(){m&&(n(l("Request aborted",e,"ECONNABORTED",m)),m=null)},m.onerror=function(){n(l("Network Error",e,null,m)),m=null},m.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",m)),m=null},r.isStandardBrowserEnv()){var b=(e.withCredentials||c(g))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;b&&(f[e.xsrfHeaderName]=b)}"setRequestHeader"in m&&r.forEach(f,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete f[t]:m.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(m.withCredentials=!!e.withCredentials),p&&"json"!==p&&(m.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&m.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&m.upload&&m.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){m&&(m.abort(),n(e),m=null)})),d||(d=null),m.send(d)}))}},609:(e,t,n)=>{"use strict";var r=n(867),o=n(849),i=n(321),a=n(185);function s(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var u=s(n(655));u.Axios=i,u.create=function(e){return s(a(u.defaults,e))},u.Cancel=n(263),u.CancelToken=n(972),u.isCancel=n(502),u.all=function(e){return Promise.all(e)},u.spread=n(713),u.isAxiosError=n(268),e.exports=u,e.exports.default=u},263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},972:(e,t,n)=>{"use strict";var r=n(263);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,n)=>{"use strict";var r=n(867),o=n(327),i=n(782),a=n(572),s=n(185),u=n(875),c=u.validators;function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&u.assertOptions(t,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var o,i=[];if(this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)})),!r){var l=[a,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(i),o=Promise.resolve(e);l.length;)o=o.then(l.shift(),l.shift());return o}for(var d=e;n.length;){var f=n.shift(),p=n.shift();try{d=f(d)}catch(e){p(e);break}}try{o=a(d)}catch(e){return Promise.reject(e)}for(;i.length;)o=o.then(i.shift(),i.shift());return o},l.prototype.getUri=function(e){return e=s(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},782:(e,t,n)=>{"use strict";var r=n(867);function o(){this.handlers=[]}o.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},97:(e,t,n)=>{"use strict";var r=n(793),o=n(303);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},61:(e,t,n)=>{"use strict";var r=n(481);e.exports=function(e,t,n,o,i){var a=new Error(e);return r(a,t,n,o,i)}},572:(e,t,n)=>{"use strict";var r=n(867),o=n(527),i=n(502),a=n(655);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},185:(e,t,n)=>{"use strict";var r=n(867);e.exports=function(e,t){t=t||{};var n={},o=["url","method","data"],i=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function u(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function c(o){r.isUndefined(t[o])?r.isUndefined(e[o])||(n[o]=u(void 0,e[o])):n[o]=u(e[o],t[o])}r.forEach(o,(function(e){r.isUndefined(t[e])||(n[e]=u(void 0,t[e]))})),r.forEach(i,c),r.forEach(a,(function(o){r.isUndefined(t[o])?r.isUndefined(e[o])||(n[o]=u(void 0,e[o])):n[o]=u(void 0,t[o])})),r.forEach(s,(function(r){r in t?n[r]=u(e[r],t[r]):r in e&&(n[r]=u(void 0,e[r]))}));var l=o.concat(i).concat(a).concat(s),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return r.forEach(d,c),n}},26:(e,t,n)=>{"use strict";var r=n(61);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},527:(e,t,n)=>{"use strict";var r=n(867),o=n(655);e.exports=function(e,t,n){var i=this||o;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},655:(e,t,n)=>{"use strict";var r=n(867),o=n(16),i=n(481),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(u=n(448)),u),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||o&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw i(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(a)})),e.exports=c},849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},327:(e,t,n)=>{"use strict";var r=n(867);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))})))})),i=a.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},372:(e,t,n)=>{"use strict";var r=n(867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},268:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},985:(e,t,n)=>{"use strict";var r=n(867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16:(e,t,n)=>{"use strict";var r=n(867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},109:(e,t,n)=>{"use strict";var r=n(867),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,a={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},875:(e,t,n)=>{"use strict";var r=n(593),o={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){o[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var i={},a=r.version.split(".");function s(e,t){for(var n=t?t.split("."):a,r=e.split("."),o=0;o<3;o++){if(n[o]>r[o])return!0;if(n[o]<r[o])return!1}return!1}o.transitional=function(e,t,n){var o=t&&s(t);function a(e,t){return"[Axios v"+r.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(a(r," has been removed in "+t));return o&&!i[r]&&(i[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={isOlderVersion:s,assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),o=r.length;o-- >0;){var i=r[o],a=t[i];if(a){var s=e[i],u=void 0===s||a(s,i,e);if(!0!==u)throw new TypeError("option "+i+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:o}},867:(e,t,n)=>{"use strict";var r=n(849),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==o.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===o.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:u,isUndefined:a,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function n(n,r){u(t[r])&&u(n)?t[r]=e(t[r],n):u(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},206:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),o=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var o=e.getVersionPrecision(t),i=e.getVersionPrecision(n),a=Math.max(o,i),s=0,u=e.map([t,n],(function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(s=a-Math.min(o,i)),a-=1;a>=s;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===s)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var o=e[n];if(t(o,n))return o}},e.assign=function(e){for(var t,n,r=e,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(i));var s=function(){var e=i[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=i.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=o,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(91))&&r.__esModule?r:{default:r},i=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){}var t,n,r;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new o.default(e,t)},e.parse=function(e){return new o.default(e).getResult()},t=e,r=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}();t.default=s,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(92)),o=u(n(93)),i=u(n(94)),a=u(n(95)),s=u(n(17));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,o={},i=0;if(Object.keys(e).forEach((function(t){var a=e[t];"string"==typeof a?(o[t]=a,i+=1):"object"==typeof a&&(n[t]=a,r+=1)})),r>0){var a=Object.keys(n),u=s.default.find(a,(function(e){return t.isOS(e)}));if(u){var c=this.satisfies(n[u]);if(void 0!==c)return c}var l=s.default.find(a,(function(e){return t.isPlatform(e)}));if(l){var d=this.satisfies(n[l]);if(void 0!==d)return d}}if(i>0){var f=Object.keys(o),p=s.default.find(f,(function(e){return t.isBrowser(e,!0)}));if(void 0!==p)return this.compareVersion(o[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),o=s.default.getBrowserTypeByAlias(r);return t&&o&&(r=o.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,o=this.getBrowserVersion();if("string"==typeof o)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(o,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=c,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=o.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=o.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=o.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=o.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=o.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=o.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=o.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=o.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=o.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=o.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=o.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=o.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=o.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=o.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=o.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=o.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=o.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=o.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=o.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=o.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=o.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=o.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=o.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=o.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=o.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=o.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=o.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:o.default.getFirstMatch(t,e),version:o.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=o.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:i.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=o.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=o.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=o.default.getWindowsVersionName(t);return{name:i.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:i.OS_MAP.iOS},n=o.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=o.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=o.default.getMacOSVersionName(t),r={name:i.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=o.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=o.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=o.default.getAndroidVersionName(t),r={name:i.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=o.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:i.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=o.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||o.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||o.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:i.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=o.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=o.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=o.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=o.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=o.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:i.ENGINE_MAP.Blink};var t=o.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:i.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:i.ENGINE_MAP.Trident},n=o.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:i.ENGINE_MAP.Presto},n=o.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:i.ENGINE_MAP.Gecko},n=o.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:i.ENGINE_MAP.WebKit},n=o.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=a,e.exports=t.default}})},310:(e,t,n)=>{"use strict";e.exports=n(702).polyfill()},702:function(e,t,n){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,a=void 0,s=function(e,t){P[o]=e,P[o+1]=t,2===(o+=2)&&(a?a(w):_())};function u(e){a=e}function c(e){s=e}var l="undefined"!=typeof window?window:void 0,d=l||{},f=d.MutationObserver||d.WebKitMutationObserver,p="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),m="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){return function(){return process.nextTick(w)}}function y(){return void 0!==i?function(){i(w)}:b()}function g(){var e=0,t=new f(w),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function v(){var e=new MessageChannel;return e.port1.onmessage=w,function(){return e.port2.postMessage(0)}}function b(){var e=setTimeout;return function(){return e(w,1)}}var P=new Array(1e3);function w(){for(var e=0;e<o;e+=2)(0,P[e])(P[e+1]),P[e]=void 0,P[e+1]=void 0;o=0}function S(){try{var e=Function("return this")().require("vertx");return i=e.runOnLoop||e.runOnContext,y()}catch(e){return b()}}var _=void 0;function A(e,t){var n=this,r=new this.constructor(O);void 0===r[k]&&z(r);var o=n._state;if(o){var i=arguments[o-1];s((function(){return W(o,r,i,n._result)}))}else G(n,r,e,t);return r}function E(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(O);return B(n,e),n}_=p?h():f?g():m?v():void 0===l?S():b();var k=Math.random().toString(36).substring(2);function O(){}var R=void 0,M=1,T=2;function L(){return new TypeError("You cannot resolve a promise with itself")}function F(){return new TypeError("A promises callback cannot return that same promise.")}function x(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function I(e,t,n){s((function(e){var r=!1,o=x(n,t,(function(n){r||(r=!0,t!==n?B(e,n):j(e,n))}),(function(t){r||(r=!0,U(e,t))}),"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,U(e,o))}),e)}function N(e,t){t._state===M?j(e,t._result):t._state===T?U(e,t._result):G(t,void 0,(function(t){return B(e,t)}),(function(t){return U(e,t)}))}function C(e,n,r){n.constructor===e.constructor&&r===A&&n.constructor.resolve===E?N(e,n):void 0===r?j(e,n):t(r)?I(e,n,r):j(e,n)}function B(t,n){if(t===n)U(t,L());else if(e(n)){var r=void 0;try{r=n.then}catch(e){return void U(t,e)}C(t,n,r)}else j(t,n)}function D(e){e._onerror&&e._onerror(e._result),V(e)}function j(e,t){e._state===R&&(e._result=t,e._state=M,0!==e._subscribers.length&&s(V,e))}function U(e,t){e._state===R&&(e._state=T,e._result=t,s(D,e))}function G(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+M]=n,o[i+T]=r,0===i&&e._state&&s(V,e)}function V(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?W(n,r,o,i):o(i);e._subscribers.length=0}}function W(e,n,r,o){var i=t(r),a=void 0,s=void 0,u=!0;if(i){try{a=r(o)}catch(e){u=!1,s=e}if(n===a)return void U(n,F())}else a=o;n._state!==R||(i&&u?B(n,a):!1===u?U(n,s):e===M?j(n,a):e===T&&U(n,a))}function q(e,t){try{t((function(t){B(e,t)}),(function(t){U(e,t)}))}catch(t){U(e,t)}}var H=0;function K(){return H++}function z(e){e[k]=H++,e._state=void 0,e._result=void 0,e._subscribers=[]}function Y(){return new Error("Array Methods must be provided an Array")}var J=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(O),this.promise[k]||z(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&j(this.promise,this._result))):U(this.promise,Y())}return e.prototype._enumerate=function(e){for(var t=0;this._state===R&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===E){var o=void 0,i=void 0,a=!1;try{o=e.then}catch(e){a=!0,i=e}if(o===A&&e._state!==R)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===te){var s=new n(O);a?U(s,i):C(s,e,o),this._willSettleAt(s,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===R&&(this._remaining--,e===T?U(r,n):this._result[t]=n),0===this._remaining&&j(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;G(e,void 0,(function(e){return n._settledAt(M,t,e)}),(function(e){return n._settledAt(T,t,e)}))},e}();function Q(e){return new J(this,e).promise}function X(e){var t=this;return r(e)?new t((function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function Z(e){var t=new this(O);return U(t,e),t}function $(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function e(t){this[k]=K(),this._result=this._state=void 0,this._subscribers=[],O!==t&&("function"!=typeof t&&$(),this instanceof e?q(this,t):ee())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var n=this,r=n.constructor;return t(e)?n.then((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))})):n.then(e,e)},e}();function ne(){var e=void 0;if(void 0!==n.g)e=n.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=te}return te.prototype.then=A,te.all=Q,te.race=X,te.resolve=E,te.reject=Z,te._setScheduler=u,te._setAsap=c,te._asap=s,te.polyfill=ne,te.Promise=te,te}()},593:e=>{"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r);var e=n(344);n(310);const t=JSON.parse('{"vU":{"WF":{"p":"Ошибка получения статуса терминала.","i":"Google Pay доступен только для рабочего терминала."},"dv":{"Dl":{"z":"Ошибка загрузки библиотеки Google Pay Api.","S":"Ошибка инициализации библиотеки Google Pay Api."},"NZ":"Указана некорректная среда работы Google Pay.","KR":"Google Merchant ID не задан."},"_w":{"cE":"Ошибка валидации мерчанта Apple Pay.","um":"Магазин не зарегистрирован в Apple Pay"},"y0":{"XK":"Ошибка: ","p":"Извините, произошла ошибка при регистрации заказа.","w9":{"W":"Неверный формат чека.","X":"Поле E-mail или Phone не должно быть пустым."},"EZ":"Ошибка получения информации о платеже."}},"um":{"dv":{"h":"Устройство не поддерживает Google Pay."},"_w":{"h":"Устройство не поддерживает Apple Pay.","I":"Нет активной карты для платежа Apple Pay."},"CH":{"n":"кэшбэк"}},"kg":{"init":"Инициализация виджета","initPayments":"Инициализация платёжный средств","redirectToPayForm":"Переход на платёжную форму","openPayFormInFrame":"Открытие платёжной формы во фрейме","openResultPage":"Отрытие страницы результата","openResultPageInFrame":"Отрытие страницы результата во фрейме","openErrorPageInFrame":"Открытие фрейма со страницей об ошибке","redirect3DS":"Переход на 3DS","frameCreation":"Создание фрейма","frameClosing":"Закрытие фрейма","frameAddition":"Добавление фрейма на страницу","apple":{"notSupported":"Apple Pay не поддерживается","buttonAddition":"Добавление платёжной кнопки Apple Pay","createButton":"Создание кнопки Apple Pay","createSession":"Создание сессии Apple Pay","initSession":"Инициализация сессии Apple Pay","cancelPayment":"Оплата Apple Pay отменена","noActiveCard":"Нет активной карты в Apple Pay","error":{"startSession":"Ошибка запроса ApplePayStartSession","finishAuthorise":"Ошибка запроса FinishAuthorise","merchantInfo":"Ошибка запроса ApplePayMerchantInfo"}},"google":{"buttonAddition":"Добавление платёжной кнопки Google Pay","notSupported":"Google Pay не поддерживается","createButton":"Создание кнопки Google Pay","error":{"payment":"Ошибка платежа Google Pay","createClient":"Ошибка создание клиента Google Pay","isReadyToPay":"Ошибка запроса готовности Google Pay","scriptLoading":"Ошибка загрузки скрипта Google Pay","scriptAdding":"Ошибка добавления скрипта Google Pay"}},"tinkoff":{"buttonAddition":"Добавление платёжной кнопки Tinkoff Pay","notSupported":"Tinkoff Pay не поддерживается","createButton":"Создание кнопки Tinkoff Pay","deepLinkOpened":"Открыта deepLink","error":{"payment":"Ошибка платежа Tinkoff Pay","createClient":"Ошибка создание клиента Tinkoff Pay","isReadyToPay":"Ошибка запроса готовности Tinkoff Pay","scriptLoading":"Ошибка загрузки скрипта Tinkoff Pay","scriptAdding":"Ошибка добавления скрипта Tinkoff Pay","allow":"Нет наличия возможности проведения оплаты TinkoffPay по API, SDK","mobile":"Нет наличия возможности проведения оплаты TinkoffPay не в мобильной версии","status":"Ошибка запроса status","deepLink":"Ошибка запроса deepLink","init":"Ошибка запроса init"}},"yandex":{"buttonAddition":"Добавление платёжной кнопки Yandex Pay","createButton":"Создание кнопки Yandex Pay","receivedToken":"Получен токен Yandex Pay","error":{"abort":"Отмена оплаты Yandex Pay","scriptLoading":"Ошибка загрузки скрипта Yandex Pay","sessionCreate":"Ошибка создания сессии","init":"Ошибка запроса Init","finishAuth":"Ошибка запроса FinishAuthorize","finishAuthResponse":"Ошибка в формате ответа FinishAuthorize","tdsAuth":"Ошибка подтверждения прохождения 3DS","tdsAuthResponse":"Неверный статус транзакции при потверждении прохождения 3DS в MAPI","payment":"Ошибка платежа Yandex Pay"}},"sber":{"buttonAddition":"Добавление платёжной кнопки Sber Pay","deepLinkOpened":"Открыта deepLink Sber Pay","error":{"payment":"Ошибка платежа Sber Pay","createClient":"Ошибка создание клиента Sber Pay","isReadyToPay":"Ошибка запроса готовности Sber Pay","scriptLoading":"Ошибка загрузки скрипта Sber Pay","scriptAdding":"Ошибка добавления скрипта Sber Pay","allow":"Нет наличия возможности проведения оплаты Sber Pay по API, SDK","mobile":"Нет наличия возможности проведения оплаты Sber Pay не в мобильной версии","status":"Ошибка запроса status Sber Pay","deepLink":"Ошибка запроса deepLink Sber Pay","init":"Ошибка запроса init Sber Pay"}},"error":{"payV1":"Ошибка запроса InitV1","pay":"Ошибка запроса Init","terminalStatus":"Ошибка запроса статуса терминала","terminalPayMethods":"Ошибка запроса GetTerminalPayMethods","featureToggles":"Ошибка запроса pf/toggles"}}}');var o,i,a,s,u,c,l,d,f;!function(e){e.Disabled="D",e.Demo="S",e.Production="P"}(o||(o={})),function(e){e.MassEnabled="Mass",e.AppleDeveloper="Developer"}(i||(i={})),function(e){e.Post="POST",e.Get="GET"}(a||(a={})),function(e){e.WIDGET="widget",e.PAYFORM="payForm"}(s||(s={})),function(e){e.TinkoffPay="TinkoffPay",e.YandexPay="YandexPay",e.ApplePay="ApplePay",e.GooglePay="GooglePay",e.SBP="SBP",e.SberPay="SberPay"}(u||(u={})),function(e){e.API="API"}(c||(c={})),function(e){e.ACQ="ACQ",e.EINV="EINV",e.MC="MC",e.WM="WM"}(l||(l={})),function(e){e.AUTHORIZED="AUTHORIZED",e.CONFIRMED="CONFIRMED",e.THREEDS_CHECKING="3DS_CHECKING"}(d||(d={})),function(e){e.N="N",e.Y="Y"}(f||(f={}));var p={HOST_URL:"https://securepay.tinkoff.ru",ALTER_HOST_URL:"https://securepayments.tinkoff.ru",ENVIRONMENT:"production",LOGGER_URL:"https://efms.tinkoff.ru/",FEATURE_TOGGLE_URL:"https://cfg.tinkoff.ru"};var m,h,y,g,v,b=function(){try{if(-1===p.HOST_URL.indexOf("HOST_URL")&&-1===p.ALTER_HOST_URL.indexOf("ALTER_HOST_URL"))return p;throw new Error}catch(e){throw new EvalError("Internal Context Error")}}(),P={HOST_URL:b.HOST_URL,ALTER_HOST_URL:b.ALTER_HOST_URL,ENVIRONMENT:b.ENVIRONMENT,LOGGER_URL:b.LOGGER_URL,FEATURE_TOGGLE_URL:b.FEATURE_TOGGLE_URL},w="[AppState] FORM_LOAD",S="closed",_="closed_disable",A="opened",E="opened_disable",k="[AppState] SET_EXIT",O="exit",R={WIDGET_STYLE:"".concat(P.HOST_URL,"/html/payForm/static/css/t-widget.css")},M={initURL:"".concat(P.HOST_URL,"/v2/Init"),initURLV1:"".concat(P.HOST_URL,"/rest/Init"),finishAuthorizeURL:"".concat(P.HOST_URL,"/v2/FinishAuthorize"),terminalStatus:"".concat(P.HOST_URL,"/v2/GetTerminalStatus"),getTerminalPayMethods:"".concat(P.HOST_URL,"/v2/GetTerminalPayMethods"),cresCallbackUrl:"".concat(P.HOST_URL,"/v2/Submit3DSAuthorizationV2"),checkTdsVersion:"".concat(P.HOST_URL,"/v2/Check3dsVersion"),getFeatureToggles:"".concat(P.FEATURE_TOGGLE_URL,"/feature-toggle/public/api/platform/v1/getToggles")},T={failURL:"".concat(P.HOST_URL,"/acq/page/widget-fail"),defaultURL:"".concat(P.HOST_URL,"/acq/page/empty")};!function(e){e.WidgetV2="Widget2.0",e.Widget="Widget"}(m||(m={})),function(e){e.GooglePay="GooglePay",e.ApplePay="ApplePay",e.TinkoffPay="TinkoffPay",e.YandexPay="YandexPay",e.SberPay="SberPay"}(h||(h={})),function(e){e.Ruble="RUB"}(y||(y={})),function(e){e.Russia="RU"}(g||(g={})),function(e){e[e.V1=0]="V1",e[e.V2=1]="V2"}(v||(v={}));var L=[d.THREEDS_CHECKING],F=!1;function x(){return F}function I(){F=!0}function N(){F=!1}var C="fetch"in window;const B=function(){function t(){}return t.log=function(n,r,o){t.enabled&&(0,e.createLogRecord)(P.LOGGER_URL,t.logBody(n,r,o),!C)},t.logBody=function(t,n,r){return{project:e.FmsProjectEnum.TINKOFFJS,level:t,message:n,metricMessage:r}},t.enabled=!1,t}();function D(e){e&&(e.preventDefault(),e.returnValue=!1)}function j(e,t){"opened"===t?(e.style.display="none",e.style.display+="!important;"):"none"===window.getComputedStyle(e,null).getPropertyValue("display")&&(e.style.display="");"t-close-frame-desktop"===e.className&&(t===E?(e.style.cursor="unset",e.disabled=!0,e.addEventListener("click",(function(e){return D(e)}))):(e.style.cursor="pointer",e.disabled=!1,e.removeEventListener("click",(function(e){return D(e)}))))}var U=window.location.href||"unknown",G=window.navigator.userAgent||"unknown";function V(){window.parent.postMessage(O,"*")}function W(){return document.querySelector(".t-frame")}function q(){return document.querySelector(".t-wrapper")}function H(){return document.querySelector(".t-frame-wrapper")}function K(e,t){e.src=t}function z(n){function r(e){var t=document.createElement("input");return t.className=e,t.tabIndex=-1,t.type="button",t.value="",t}void 0===n&&(n=T.defaultURL),B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.frameCreation,userAgent:G,url:U},t.kg.frameCreation);var o,i,a=(o=R.WIDGET_STYLE,(i=document.createElement("link")).rel="stylesheet",i.href=o,i.type="text/css",i);document.head.appendChild(a);var s=r("t-close-frame-mobile"),u=r("t-close-frame-desktop"),c=document.createElement("div");c.className="t-button-container",c.tabIndex=-1;var l=document.createElement("div");l.className="t-frame-wrapper",l.style.display="none";var d=document.createElement("div");d.className="t-wrapper",d.style.display="none";var f=function(e){var t=document.createElement("iframe");return t.setAttribute("allowpaymentrequest","true"),t.setAttribute("allow","payment"),t.className=e,t.tabIndex=-1,t}("t-frame");function p(){B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.frameClosing,userAgent:G,url:U},t.kg.frameClosing),function(){var e=q(),t=H();Y(e),Y(t),document.documentElement.classList.remove("t-widget-popup")}(),K(W(),T.defaultURL),N()}K(f,n),c.appendChild(s),l.appendChild(u),l.appendChild(f),d.appendChild(c),d.appendChild(l),s.addEventListener("click",(function(){p(),V()})),u.addEventListener("click",(function(){p(),V()})),window.addEventListener("message",(function(e){!e.isTrusted||e.origin!==P.HOST_URL&&e.origin!==P.ALTER_HOST_URL||(e.data!==k&&e.data!==O||p(),e.data===w&&f.contentWindow.postMessage("Widget2.0","*"),e.data!==A&&e.data!==S&&e.data!==E&&e.data!==_||(j(u,e.data),j(c,e.data)))}),!1),B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.frameAddition,userAgent:G,url:U},t.kg.frameAddition),document.body.appendChild(d)}function Y(e){e.style.display="none"}function J(e){e.style.display="block"}function Q(e,t){var n,r,o=W();t&&(e+=function(e,t){void 0===t&&(t=!1);var n=t?function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(String(e[t])))}:function(t){return"".concat(t,"=").concat(e[t])};return"?".concat(Object.keys(e).map(n).join("&"))}(t)),o?K(o,e):z(e),n=q(),r=H(),document.documentElement.classList.add("t-widget-popup"),J(n),J(r)}var X=n(669),Z=n.n(X),$="".concat(P.HOST_URL,"/v2/ApplePayStartSession"),ee="".concat(P.HOST_URL,"/v2/ApplePayMerchantInfo");const te=function(){function e(){this.http=Z().create({headers:{"content-type":"application/json"},responseType:"json",transformResponse:[function(e){var t;try{t=JSON.parse(e)}catch(n){t=e}if(t.ErrorCode&&"0"!==t.ErrorCode||!1===t.Success)throw{ErrorCode:t.ErrorCode||"0",Message:t.Message,Details:t.Details};return t}]}),this.http.interceptors.response.use((function(e){return e}),(function(e){if(e.ErrorCode)throw e;return Promise.reject({status:e.response?e.response.status:e.name,statusText:e.response?e.response.statusText:e.message})}))}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.init=function(e){return this.post(M.initURL,e,{headers:{"X-INIT":"tinkoffjs"}})},e.prototype.initV1=function(e){return this.get(M.initURLV1,e)},e.prototype.checkTdsVersion=function(e){return this.post(M.checkTdsVersion,e,{headers:{"Content-Type":"application/json"}})},e.prototype.finishAuthorise=function(e){return this.post(M.finishAuthorizeURL,e)},e.prototype.getTerminalStatus=function(e){return this.get(M.terminalStatus,{TerminalKey:e})},e.prototype.getTerminalPayMethods=function(e,t){return void 0===t&&(t=c.API),this.get(M.getTerminalPayMethods,{TerminalKey:e,PaySource:t})},e.prototype.getFeatureToggles=function(e){return this.get(M.getFeatureToggles,{path:e})},e.prototype.ApplePayStartSession=function(e){return this.post($,e)},e.prototype.ApplePayMerchantInfo=function(e){return this.post(ee,e)},e.prototype.getTinkoffPayDeepLink=function(e,t){var n=function(e,t){return"".concat(P.HOST_URL,"/v2/TinkoffPay/transactions/").concat(e,"/versions/").concat(t,"/link")}(e,t);return this.get(n,{}).then(this.getParams)},e.prototype.getSberPayDeepLink=function(e){var t=function(e){return"".concat(P.HOST_URL,"/v2/SberPay/transactions/").concat(e,"/link")}(e);return this.get(t,{}).then(this.getParams)},e.prototype.getSberPayQR=function(e){var t=function(e){return"".concat(P.HOST_URL,"/v2/SberPay/").concat(e,"/QR")}(e);return this.getSvg(t)},e.prototype.getParams=function(e){return e.Params},e.prototype.get=function(e,t){return this.http.get(e,{params:t}).then((function(e){return e.data}))},e.prototype.getSvg=function(e){return Z().get(e,{headers:{Accept:"image/svg+xml, application/json"}}).then((function(e){return e.data}))},e.prototype.post=function(e,t,n){return this.http.post(e,t,n).then((function(e){return e.data}))},e}();var ne,re,oe=function(){function n(e){void 0===e&&(e=""),this._merchantId=e,this.apiService=te.getInstance()}return n.prototype._initPayment=function(e,t){x()||(I(),t.paymentData?(e&&(t.paymentData.DATA["".concat(e,"Web")]=!0),this._startPayment(t)):N())},n.prototype._sendInit=function(e){return this.apiService.init(e).then((function(e){return e.PaymentId}))},n.prototype._sendFA=function(e,t,n,r){var o={DATA:e.paymentData.DATA,EncryptedPaymentData:btoa(n),PaymentId:t,Source:r,TerminalKey:e.paymentData.TerminalKey};return o.DATA.referrer_url=window.location.hostname,e.infoEmail&&(o.SendEmail=!0,o.InfoEmail=e.infoEmail),this.apiService.finishAuthorise(o)},n.prototype._showErrorPopup=function(n){B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.openErrorPageInFrame,userAgent:G,url:U},t.kg.openErrorPageInFrame),n?Q(T.failURL,{language:n}):Q(T.failURL)},n}(),ie="/html/payForm/tinkoffPayWidget/tinkoffPayPayment.html",ae=function(){function e(){this.isFrameReady=!1,this.frameWrapper=document.createElement("div"),this.frameWrapper.classList.add("t-tinkoff-pay-frame-wrapper"),this.frameWrapper.style.display="none",this.iframe=document.createElement("iframe"),this.iframe.classList.add("t-frame"),this.closeButton=document.createElement("input"),this.closeButton.classList.add("t-close-frame-desktop"),this.closeButton.type="button",this.frameWrapper.appendChild(this.iframe),this.frameWrapper.appendChild(this.closeButton),this.wrapper=q(),this.wrapper.appendChild(this.frameWrapper)}return e.prototype.showModal=function(e){var t=this;this.iframe.src="".concat(P.HOST_URL).concat(ie),this.hideModalBinded=this.hideModal.bind(this),this.postMessageToFrameBinded=this.postMessageToFrame.bind(this,e),J(this.frameWrapper),J(this.wrapper),window.addEventListener("message",this.postMessageToFrameBinded),document.addEventListener("click",this.hideModalBinded),this.closeButton.addEventListener("click",this.hideModalBinded);var n=setInterval((function(){t.isFrameReady?clearInterval(n):t.iframe.src="".concat(P.HOST_URL).concat(ie)}),1e3);setTimeout((function(){clearInterval(n)}),3e4)},e.prototype.hideModal=function(e){e.stopPropagation();var t=e.target;this.frameWrapper.contains(t)&&!this.closeButton.contains(t)||(this.wrapper.removeChild(this.frameWrapper),Y(this.wrapper),this.removeListners(),this.isFrameReady=!1)},e.prototype.postMessageToFrame=function(e,t){"tPayIframeReady"===t.data&&(this.isFrameReady=!0,this.iframe.contentWindow.postMessage(e,"*")),"tPayIframeClose"===t.data&&this.hideModal(new Event(""))},e.prototype.removeListners=function(){document.removeEventListener("click",this.hideModalBinded),this.closeButton.removeEventListener("click",this.hideModalBinded),window.removeEventListener("message",this.postMessageToFrameBinded)},e}(),se=function(){return("ontouchstart"in window.document.documentElement||window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0||null!==window.navigator.userAgent.match(/android|iphone|ipad|ipod/i))&&!function(){var e=navigator.userAgent.toLowerCase(),t=navigator.maxTouchPoints,n=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e);return/Macintosh/i.test(e)&&t&&t>1||n}()},ue=function(){function n(){}return n.prototype.openLink=function(n,r){var o=navigator.userAgent.toLowerCase().indexOf("android")>-1,i=o&&!r?this.makeAndroidLink(n):n;B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.tinkoff.deepLinkOpened,userAgent:G,url:U},t.kg.tinkoff.deepLinkOpened);try{o?window.open(i,"_blank").focus():window.location.href=i}catch(e){console.error(e)}},n.prototype.makeAndroidLink=function(e){var t="production"===P.ENVIRONMENT?"com.idamob.tinkoff.android":"com.idamob.tinkoff.android.qa",n=e.split("://"),r=n[0],o=n[1];return"intent://".concat(o,"#Intent;package=").concat(t,";scheme=").concat(r,";end")},n}(),ce=function(){function e(){this.buttonElement=document.createElement("button"),this.buttonElement.setAttribute("type","button"),this.buttonElement.className="tinkoff-pay-button",this.buttonText=document.createElement("div"),this.buttonText.className="tpay-button__text",this.buttonIcon=document.createElement("div"),this.buttonIcon.className="tpay-button__icon";var e=document.createElement("div");e.className="tpay-button__container",e.appendChild(this.buttonText),this.buttonElement.append(e,this.buttonIcon)}return e.prototype.addPercentSpan=function(e){var n=document.createElement("span");n.className="tinkoff-pay-cashback",n.innerText=e?"".concat(e,"% ").concat(t.um.CH.n):t.um.CH.n,this.buttonIcon.classList.add("tpay-button__icon_with-cashback"),this.buttonElement.appendChild(n)},e.prototype.setPayWithButton=function(){this.buttonText.className="tpay-button__text_pay-with"},e.prototype.setTPayTitle=function(){this.buttonText.className="tpay-button__text_tpay-title"},e}();!function(e){e.WINDOWS="Windows",e.MACOS="Mac",e.LINUX="Linux",e.ANDROID="Android",e.IOS="iOS",e.WINDOWS_PHONE="Windows Phone",e.UNKNOWN="Unknown OS"}(ne||(ne={})),function(e){e.MOBILE="Mobile",e.DESKTOP="Desktop"}(re||(re={}));const le=["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(wv|Version/)","Linux; U; Android"];var de=navigator.userAgent.match(/(Android)|(BlackBerry)|(iPhone|iPad|iPod)|(Opera Mini)|(IEMobile)/i)&&function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var e,t=["("," -webkit- -moz- -o- -ms- ".split(" ").join("touch-enabled),("),"heartz",")"].join("");return e=t,window.matchMedia(e).matches}(),fe=n(206),pe=n.n(fe),me="desktop"===fe.parse(navigator.userAgent).platform.type;function he(e){void 0===e&&(e=navigator.userAgent);var t=new RegExp("(".concat(le.join("|"),")"),"ig");return!!e.match(t)}function ye(){var e,t,n={};return de&&(n.Device=re.MOBILE),me&&(n.Device=re.DESKTOP),n.DeviceOs=(e=pe().getParser(navigator.userAgent).getOSName(),t=ne.UNKNOWN,"macOS"===e&&(t=ne.MACOS),Object.values(ne).includes(e)&&(t=e),t),n.DeviceBrowser=pe().getParser(navigator.userAgent).getBrowserName(),n.DeviceWebView=he(),n.DeviceIframe=function(){try{return window.self!==window.top||window.self.document!==window.top.document||window.self.location!==window.top.location}catch(e){}return!0}(),n}var ge=function(){function e(){}return e.getInstance=function(){return null===this.state&&(this.state=new e),this.state},e.prototype.getFeatureToggleList=function(){return this.featureToggleList},e.prototype.saveFeatureToggleList=function(e){this.featureToggleList=e},e.state=null,e}();var ve,be=(ve=function(e,t){return ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},ve(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ve(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Pe=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},we=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Se=function(n){function r(e){var t=n.call(this)||this;return t.deepLinkService=new ue,t.featureToggleList=ge.getInstance().getFeatureToggleList(),t.payVersion=null==e?void 0:e.Version,t.customButton=null==e?void 0:e.CustomButton,t.isTPayDesignEnabled=!!function(e,t){var n;if(e){var r=e.find((function(e){return e.isOn&&e.path===t}));return null!==(n=null==r?void 0:r.value)&&void 0!==n?n:void 0}}(t.featureToggleList,"eacq/payment_widget/enableTunaDesign"),t}return be(r,n),r.prototype.createPaymentButton=function(e){var t,n=this,r=new ce,o=e();switch(o.paymentData.DATA.connection_type=m.Widget,r.buttonElement.addEventListener("click",(function(){return n._initPayment(h.TinkoffPay,o)})),null===(t=this.customButton)||void 0===t?void 0:t.CustomButtonType){case"payWithButton":r.setPayWithButton();break;case"cashbackButton":case"percentButton":r.addPercentSpan(this.customButton.Percent)}return this.isTPayDesignEnabled&&r.setTPayTitle(),r.buttonElement},r.prototype.sendPayment=function(n){return Pe(this,void 0,void 0,(function(){var r,o,i,a,s,u,c;return we(this,(function(l){switch(l.label){case 0:r=new ae,l.label=1;case 1:return l.trys.push([1,3,,4]),n.paymentData.DATA=Object.assign(n.paymentData.DATA,ye()),[4,this.apiService.init(n.paymentData)];case 2:return s=l.sent(),o=s.PaymentId,i=s.PaymentURL.split("/").pop(),[3,4];case 3:return a=l.sent(),console.error(a),B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.tinkoff.error.init,error:a},t.kg.tinkoff.error.init),N(),[2];case 4:return l.trys.push([4,6,,7]),[4,this.apiService.getTinkoffPayDeepLink(o,this.payVersion)];case 5:return s=l.sent(),(u="2.0"===this.payVersion)&&!se()?r.showModal({qrCodeSvg:s.WebQR,uuid:i,isTPayDesignEnabled:this.isTPayDesignEnabled}):(r.showModal({showLoad:!0,uuid:i}),this.deepLinkService.openLink(s.RedirectUrl,u)),N(),[3,7];case 6:return c=l.sent(),console.error(c),r.showModal({showError:!0}),B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.tinkoff.error.deepLink,error:c},t.kg.tinkoff.error.deepLink),N(),[3,7];case 7:return[2]}}))}))},r.prototype._startPayment=function(e){this.sendPayment(e)},r.prototype._getPaymentRequest=function(e){},r}(oe);function _e(e,t,n){var r=document.createElement("script");r.src=e,r.async=!0,r.onload=function(){return t()},r.onerror=function(){return n()},document.querySelector("body").appendChild(r)}function Ae(e,t){return t!==u.GooglePay&&((t!==u.SberPay||!he())&&(!!e.TerminalInfo&&e.TerminalInfo.Paymethods.some((function(e){return e.PayMethod===t}))))}var Ee=/(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/,ke=function(){function e(){}return e.prototype.getCurrentScript=function(){if("currentScript"in document)return document.currentScript;var e,t=window.location.href.replace(/#.*$/,"").replace(/\?.*$/,"")||null,n=document.getElementsByTagName("script");if(0===n.length)return null;try{var r=new Error;if(!this.checkErrorStack(r))throw r;e=r.stack}catch(t){this.checkErrorStack(t)&&(e=t.stack)}if(!e)return null;var o=this._getScriptUrlFromStack(e),i=this._getScriptFromUrl(o,n);return!i&&t&&o===t?null:i},e.prototype.checkErrorStack=function(e){return"string"==typeof e.stack&&!!e.stack},e.prototype._getScriptFromUrl=function(e,t){var n;for(n=t.length;n--;)if(t[n].src===e)return t[n];return null},e.prototype._getScriptUrlFromStack=function(e){var t=e.match(Ee);return t&&t[1]?t[1]:null},e}();function Oe(e){var t=(e=e.toString()).replace(/,/gi,"."),n=t.match(/\./g);if(null!==t.replace(/\./gi,"").match(/\D/)||n&&n.length>1)throw new Error('Значение "'.concat(e,'" - не является числом.'));if(null===n)return Number(t);var r=(Number(t)/100).toString().split(".");return r[1].length<2&&(r[1]+="0"),Number(r[0]+r[1])}function Re(e){return e=e?"string"==typeof e?function(e,t){try{return JSON.parse(e)}catch(r){var n={};return e.split(t).forEach((function(e){var t=e.split("="),r=t[0].trim();t.length>0&&r&&(n[r]=t[1])})),n}}(e,"|"):e:{}}function Me(n,r,o,i){try{n.Amount=Oe(n.Amount)}catch(t){return B.log(e.FmsLogLevelEnum.ERROR,{title:"Ошибка получения суммы платежа"}),console.error(t),!1}if(n.DATA=Re(n.DATA),n.DATA.connection_type=m.WidgetV2,n.OrderId=n.OrderId||(new Date).getTime().toString(),n.Receipt){if("string"==typeof n.Receipt)try{n.Receipt=JSON.parse(n.Receipt)}catch(n){return B.log(e.FmsLogLevelEnum.ERROR,{title:"Некорректный формат чека"}),console.error(t.vU.y0.XK+t.vU.y0.w9.W),!1}if(n.Receipt.Email=r||n.Receipt.Email,n.Receipt.Phone=o||n.Receipt.Phone,!n.Receipt.Email&&!n.Receipt.Phone)return console.error(t.vU.y0.XK+t.vU.y0.w9.X),!1}return!0}function Te(e){return e?e.value:""}function Le(e){return"true"===e.toLowerCase()}function Fe(e){return 100*Number(e.replace(/,/gi,"."))}function xe(t){var n=Te(t.email),r=Te(t.phone),o=Te(t.name),i=Te(t.receipt),a=Te(t.DATA),s=Te(t.description),u=Te(t.order),c=Te(t.amount),l=Te(t.frame),d=Te(t.terminalkey),f=Te(t.language),p=Le(Te(t.reccurentPayment)),m=Te(t.customerKey),h=Te(t.shops),y={Amount:Fe(c),Description:s,Frame:Le(l),OrderId:u,TerminalKey:d,DATA:a,Language:f};if(i&&(y.Receipt=i),h)try{var g=JSON.parse(h,(function(e,t){return"Amount"===e?Number(t):t}));Array.isArray(g)&&g.every((function(e){return"ShopCode"in e&&"Amount"in e}))&&(y.Shops=g)}catch(t){console.error(t),B.log(e.FmsLogLevelEnum.ERROR,{title:"Неверный формат JSON"})}if(p){if(!m)return alert("При использовании реккурентного платежа поле customerKey не должно быть пустым"),null;y.Recurrent="Y",y.CustomerKey=m}return Me(y,n,r)?([["Email",n],["Phone",r],["Name",o]].filter((function(e){return!!e[1]})).forEach((function(e){y.DATA[e[0]]=e[1]})),y):null}function Ie(e){var t=e.Email,n=e.Phone;e.Name;return delete e.Name,delete e.Email,delete e.Phone,Me(e,t,n)?e:null}function Ne(e,t){var n,r;return e.TerminalInfo?null===(r=null===(n=null==e?void 0:e.TerminalInfo)||void 0===n?void 0:n.Paymethods)||void 0===r?void 0:r.find((function(e){return e.PayMethod===t})):null}function Ce(e){window.location.href=e}var Be=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const De=function(n){function r(e){var t=n.call(this,e.merchantInfo.MerchantId)||this;return t.applePayVersion=1,t.mirSupportsVersion=11,t.supportsMir=!1,t.paymentLabel=e.merchantInfo.MerchantName,t.buttonOptions=e.buttonOptions,t}return Be(r,n),r.prototype.createPaymentButton=function(n){var r=this;B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.apple.createButton,userAgent:G,url:U},t.kg.apple.createButton);var o=document.createElement("button");o.setAttribute("type","button"),this.buttonOptions.lang&&o.setAttribute("lang",this.buttonOptions.lang);var i=["apple-pay-button"];return this.buttonOptions.color&&i.push("apple-pay-button-".concat(this.buttonOptions.color)),this.buttonOptions.outline&&i.push("apple-pay-button-line"),o.className=i.join(" "),o.style.setProperty("-apple-pay-button-type",this.buttonOptions.type||"plain"),o.addEventListener("click",(function(){return r._initPayment(h.ApplePay,n())})),o},r.prototype.enableMirSupport=function(){window.ApplePaySession.supportsVersion(this.mirSupportsVersion)&&(this.applePayVersion=this.mirSupportsVersion,this.supportsMir=!0)},r.prototype._getPaymentRequest=function(e){var t=["masterCard","visa"];return this.supportsMir&&t.push("mir"),{countryCode:g.Russia,currencyCode:y.Ruble,supportedNetworks:t,merchantCapabilities:["supports3DS"],total:{type:"final",label:this.paymentLabel,amount:(e.paymentData.Amount/100).toString()}}},r.prototype._startPayment=function(n){var r=this;B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.apple.createSession,userAgent:G,url:U},t.kg.apple.createSession),this.enableMirSupport();var o=new window.ApplePaySession(this.applePayVersion,this._getPaymentRequest(n));this._sendInit(n.paymentData).then((function(e){r._startApplePaySession(o,n,e)})).catch((function(e){r._showErrorPopup(n.paymentData.Language),N()}))},r.prototype._startApplePaySession=function(n,r,o){var a=this;B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.apple.initSession,userAgent:G,url:U},t.kg.apple.initSession),n.onvalidatemerchant=function(s){var u={TerminalKey:r.paymentData.TerminalKey,ValidationURL:s.validationURL,PaymentId:o,RegistrationType:i.MassEnabled};a.apiService.ApplePayStartSession(u).then((function(e){n&&n.completeMerchantValidation(e.ValidationResult)})).catch((function(o){B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.apple.error.startSession,error:o}),n&&(Object.prototype.hasOwnProperty.call(o,"ErrorCode")&&console.error(t.vU._w.cE),setTimeout((function(){B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.apple.error.startSession,userAgent:G,url:U},t.kg.apple.error.startSession),a._showErrorPopup(r.paymentData.Language),n.abort(),N()}),3e3))}))},n.onpaymentauthorized=function(i){a._sendFA(r,o,JSON.stringify(i.payment.token.paymentData),h.ApplePay).then((function(r){n&&(n.completePayment(window.ApplePaySession.STATUS_SUCCESS),setTimeout((function(){B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.openResultPage,userAgent:G,url:U},t.kg.openResultPage),Ce(r.BackUrl),N()}),3e3))})).catch((function(o){B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.apple.error.finishAuthorise,error:o}),n&&(n.completePayment(window.ApplePaySession.STATUS_FAILURE),setTimeout((function(){B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.openResultPage,userAgent:G,url:U},t.kg.apple.error.finishAuthorise),a._showErrorPopup(r.paymentData.Language),N()}),3e3))}))},n.oncancel=function(r){B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.apple.cancelPayment,userAgent:G,url:U},t.kg.apple.cancelPayment),N(),n=null},n.begin()},r}(oe);var je={apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:["VISA","MASTERCARD"]}}]};function Ue(e,t,n){void 0===n&&(n="hidden");var r=document.createElement("input");return r.type=n,r.value=e,r.name=t,r}function Ge(e){var t=document.createElement("form");t.action=e.ACSUrl,t.method=a.Post;for(var n={MD:e.MD,PaReq:e.PaReq,TermUrl:e.TermUrl},r=0,o=Object.keys(n);r<o.length;r++){var i=o[r],s=n[i];s&&t.append(Ue(s,i))}return t.style.display="none",t}var Ve=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),We=function(){return We=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},We.apply(this,arguments)},qe=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},He=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Ke=function(n){function r(e,t){var r=n.call(this,e.merchantId)||this;return r._paymentsClient=t,r.buttonCommonOptions={onClick:null},e.buttonColor&&(r.buttonCommonOptions.buttonColor=e.buttonColor),e.buttonType&&(r.buttonCommonOptions.buttonType=e.buttonType),r}return Ve(r,n),r.loadGooglePayScript=function(e,t){var n=this;return new Promise((function(r){_e("https://pay.google.com/gp/p/js/pay.js",(function(){return n.onScriptLoad(e,t).then((function(e){return r(e)}))}),(function(){n.onScriptError(),r(null)}))}))},r.onScriptLoad=function(n,o){return qe(this,void 0,void 0,(function(){var i,a;return He(this,(function(s){switch(s.label){case 0:if(!(i=new window.google.payments.api.PaymentsClient({environment:o})))return B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.google.error.createClient,environment:o},t.kg.google.error.createClient),console.error(t.vU.dv.Dl.S),[2,null];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.isReadyToPay(je)];case 2:return s.sent().result?[2,new r(n,i)]:(B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.google.notSupported,userAgent:G,url:U},t.kg.google.notSupported),console.info(t.um.dv.h),[2,null]);case 3:return a=s.sent(),B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.google.error.isReadyToPay,error:a},t.kg.google.error.isReadyToPay),console.error(t.vU.dv.Dl.S),[2,null];case 4:return[2]}}))}))},r.onScriptError=function(){B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.google.error.scriptLoading,userAgent:G,url:U},t.kg.google.error.scriptLoading),console.error(t.vU.dv.Dl.z)},r.prototype.createPaymentButton=function(n){var r=this;B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.google.createButton,userAgent:G,url:U},t.kg.google.createButton);var o=We(We({},this.buttonCommonOptions),{onClick:function(){return r._initPayment(h.GooglePay,n())}});return this._paymentsClient.createButton(o)},r.prototype._getPaymentRequest=function(e){var t=We(We({},je),{transactionInfo:{currencyCode:y.Ruble,totalPrice:(e.paymentData.Amount/100).toString(),totalPriceStatus:"FINAL"}});return t.allowedPaymentMethods[0].tokenizationSpecification={type:"PAYMENT_GATEWAY",parameters:{gateway:"tinkoff",gatewayMerchantId:e.paymentData.TerminalKey}},this._merchantId&&(t.merchantInfo={merchantId:this._merchantId}),t},r.prototype._startPayment=function(n){var r=this;this._sendInit(n.paymentData).then((function(e){return r._paymentsClient.loadPaymentData(r._getPaymentRequest(n)).then((function(t){return n.paymentData.DATA.GooglePaySource=s.WIDGET,r._sendFA(n,e,t.paymentMethodData.tokenizationData.token,h.GooglePay)}))})).then((function(r){if(Ce(r.BackUrl),r.BackUrl&&(!n.paymentData.Frame||de?(B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.openResultPage,userAgent:G,url:U},t.kg.openResultPage),Ce(r.BackUrl)):(B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.openResultPageInFrame,userAgent:G,url:U},t.kg.openResultPageInFrame),Q(r.BackUrl))),r.ACSUrl){B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.redirect3DS,userAgent:G,url:U},t.kg.redirect3DS);var o=Ge(r);document.body.append(o),o.submit()}N()})).catch((function(o){B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.google.error.payment,error:o},t.kg.google.error.payment),r._showErrorPopup(n.paymentData.Language),N()}))},r}(oe);function ze(e){var t,n,r,o=Ge(e);return o.appendChild(Ue((t=e.AcsTransId,n=e.TdsServerTransId,r={acsTransID:t,threeDSServerTransID:n,messageVersion:"2.1.0",messageType:"CReq",challengeWindowSize:"05"},btoa(JSON.stringify(r))),"creq")),o}var Ye=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Je=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Qe=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Xe=function(n){function r(e,t,r,o){var i=n.call(this,r.MerchantId)||this;return i.yandexSession=e,i.yandexPaymentInfo=t,i.yandexCustomizationParams=r,i.containerId=o,i.YaPay=window.YaPay,i}return Ye(r,n),r.loadYaPayScript=function(n,o,i,a){var s=this;return new Promise((function(u){try{_e("https://pay.yandex.ru/sdk/v1/pay.js",(function(){var c=window.YaPay;s.yPayPaymentData=r.formatSessionData(n,o,i),c.createPayment(s.yPayPaymentData).then((function(e){u(new r(e,o,n,a))})).catch((function(n){B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.yandex.error.sessionCreate,error:n},t.kg.yandex.error.sessionCreate),u(null)}))}),(function(){B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.yandex.error.scriptLoading,userAgent:G,url:U},t.kg.yandex.error.scriptLoading),console.error(t.kg.yandex.error.scriptLoading),u(null)}))}catch(n){B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.yandex.error.scriptLoading,userAgent:G,url:U},t.kg.yandex.error.scriptLoading),console.error(t.kg.yandex.error.scriptLoading),u(null)}}))},r.formatSessionData=function(e,t,n){var r=window.YaPay;return{version:2,env:"TEST"===t.environment?r.PaymentEnv.Sandbox:r.PaymentEnv.Production,countryCode:r.CountryCode.Ru,currencyCode:r.CurrencyCode.Rub,merchant:{id:e.ShowcaseId,name:e.MerchantName,url:e.MerchantOrigin},order:{id:e.MerchantId+n.orderId,total:{amount:n.amount}},paymentMethods:[{type:r.PaymentMethodType.Card,gateway:"tinkoff",gatewayMerchantId:e.MerchantId,allowedAuthMethods:[r.AllowedAuthMethod.PanOnly],allowedCardNetworks:[r.AllowedCardNetwork.Visa,r.AllowedCardNetwork.Mastercard,r.AllowedCardNetwork.Mir,r.AllowedCardNetwork.Maestro,r.AllowedCardNetwork.VisaElectron]}]}},r.prototype.createPaymentButton=function(){var n=this.paymentInfo();return n.paymentData.DATA.connection_type=m.Widget,this.subscribeToPaymentsEvents(n),B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.yandex.createButton,userAgent:G,url:U},t.kg.yandex.createButton),this.mountPaymentButton(),null},r.prototype.setPaymentFn=function(e){this.paymentInfo=e},r.prototype.subscribeToPaymentsEvents=function(n){var r=this;this.yandexSession.on("process",(function(o){r.yandexSession.complete(r.YaPay.CompleteReason.Success),r.token=o.token,B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.yandex.receivedToken,event:o},t.kg.yandex.receivedToken),r._initPayment(h.YandexPay,n)})),this.yandexSession.on("abort",(function(n){r.yandexSession.complete(r.YaPay.CompleteReason.Close),B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.yandex.error.abort,event:n},t.kg.yandex.error.abort),r._showErrorPopup()})),this.yandexSession.on("error",(function(n){r.yandexSession.complete(r.YaPay.CompleteReason.Error),B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.yandex.error.payment,event:n},t.kg.yandex.error.payment),r._showErrorPopup()}))},r.prototype.getFAdata=function(e,t){var n={DATA:e.paymentData.DATA,EncryptedPaymentData:this.token,PaymentId:t,Source:h.YandexPay,TerminalKey:e.paymentData.TerminalKey,Route:l.ACQ};return n.DATA.threeDSCompInd=f.N,n.DATA.withoutCheck3DS=!0,n.DATA.cresCallbackUrl=M.cresCallbackUrl,n.DATA.screen_height=window.screen.height.toString(),n.DATA.screen_width=window.screen.width.toString(),e.infoEmail&&(n.SendEmail=!0,n.InfoEmail=e.infoEmail),n},r.prototype.getCheckTdsVersionRequest=function(e,t){return{TerminalKey:e.paymentData.TerminalKey,EncryptedPaymentData:this.token,PaymentId:t}},r.prototype.redirectToStatusPage=function(n,r){!n||de?(B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.openResultPageInFrame,userAgent:G,url:U},t.kg.openResultPageInFrame),Ce(r),N()):(B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.openResultPageInFrame,userAgent:G,url:U},t.kg.openResultPageInFrame),Q(r),this.resetPaymentSession(),N())},r.prototype.sendPayment=function(n){return Je(this,void 0,void 0,(function(){var r,o,i,a,s,u,c,l,d,f;return Qe(this,(function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),[4,this._sendInit(n.paymentData)];case 1:return r=p.sent(),[3,3];case 2:return a=p.sent(),B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.yandex.error.init,error:a},t.kg.yandex.error.init),this.resetPaymentSession(),this._showErrorPopup(n.paymentData.Language),N(),[2];case 3:return p.trys.push([3,5,,6]),s=this.getCheckTdsVersionRequest(n,r),[4,this.apiService.checkTdsVersion(s)];case 4:return(u=p.sent()).HtmlForm&&(i=function(e){var t=document.createElement("iframe");t.name="acs_frame",t.style.display="none";var n=document.createElement("form");for(var r in n.action=e.Action,n.method=e.Method,n.target="acs_frame",n.style.display="none",e.Inputs)n.appendChild(Ue(e.Inputs[r],r));return document.body.append(t,n),{submit:function(){return n.submit()},remove:function(){null==n||n.remove(),null==t||t.remove()}}}(u.HtmlForm),i.submit()),[3,6];case 5:return c=p.sent(),B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.yandex.error.tdsAuthResponse,error:c},t.kg.yandex.error.tdsAuthResponse),null==i||i.remove(),this.resetPaymentSession(),this._showErrorPopup(n.paymentData.Language),N(),[2];case 6:return p.trys.push([6,8,,9]),l=this.getFAdata(n,r),[4,this.apiService.finishAuthorise(l)];case 7:return(o=p.sent()).BackUrl?(this.redirectToStatusPage(n.paymentData.Frame,o.BackUrl),[2]):[3,9];case 8:return d=p.sent(),B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.yandex.error.finishAuth,error:d},t.kg.yandex.error.finishAuth),null==i||i.remove(),this.resetPaymentSession(),this._showErrorPopup(n.paymentData.Language),N(),[2];case 9:try{if(L.indexOf(o.Status)>-1&&o.ACSUrl)return f=ze(o),document.body.append(f),f.submit(),N(),[2]}catch(r){return B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.yandex.error.tdsAuth,error:r},t.kg.yandex.error.tdsAuth),null==i||i.remove(),this._showErrorPopup(n.paymentData.Language),N(),[2]}return B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.yandex.error.finishAuthResponse},t.kg.yandex.error.finishAuthResponse),null==i||i.remove(),this._showErrorPopup(n.paymentData.Language),N(),[2]}}))}))},r.prototype.resetPaymentSession=function(){var n=this;this.yandexSession.destroy(),window.YaPay.createPayment(r.yPayPaymentData).then((function(e){n.yandexSession=e,n.createPaymentButton()})).catch((function(n){B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.yandex.error.sessionCreate,error:n},t.kg.yandex.error.sessionCreate)}))},r.prototype.mountPaymentButton=function(){var e=this.yandexCustomizationParams.Person?this.YaPay.ButtonType.Pay:this.YaPay.ButtonType.Simple;this.yandexSession.mountButton(document.getElementById(this.containerId),{type:e,theme:this.yandexPaymentInfo.buttonTheme,width:this.yandexPaymentInfo.buttonWidth})},r.prototype._getPaymentRequest=function(e){},r.prototype._startPayment=function(e){this.sendPayment(e)},r}(oe),Ze=function(){this.buttonElement=document.createElement("button"),this.buttonElement.setAttribute("type","button"),this.buttonElement.className="sber-pay-button";var e=document.createElement("div");e.className="sber-pay-button__icon",this.buttonElement.appendChild(e)},$e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),et=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},tt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},nt=function(n){function r(e){var t=n.call(this)||this;return t.deepLinkService=new ue,t}return $e(r,n),r.prototype.createPaymentButton=function(e){var t=this,n=new Ze,r=e();return r.paymentData.DATA.connection_type=m.Widget,n.buttonElement.addEventListener("click",(function(){return t._initPayment(h.SberPay,r)})),n.buttonElement},r.prototype.sendPayment=function(n){return et(this,void 0,void 0,(function(){var r,o,i,a,s,u,c;return tt(this,(function(l){switch(l.label){case 0:r=new ae,l.label=1;case 1:return l.trys.push([1,3,,4]),n.paymentData.DATA=Object.assign(n.paymentData.DATA,ye()),[4,this.apiService.init(n.paymentData)];case 2:return s=l.sent(),o=s.PaymentId,i=s.PaymentURL.split("/").pop(),[3,4];case 3:return a=l.sent(),console.error(a),B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.sber.error.init,error:a},t.kg.sber.error.init),N(),[2];case 4:return l.trys.push([4,9,,10]),[4,this.apiService.getSberPayDeepLink(o)];case 5:return s=l.sent(),se()?[3,7]:[4,this.apiService.getSberPayQR(o)];case 6:return u=l.sent(),r.showModal({qrCodeSvg:u,uuid:i,source:"sberPay"}),[3,8];case 7:r.showModal({showLoad:!0,uuid:i}),this.deepLinkService.openLink(s.RedirectUrl,!0),l.label=8;case 8:return N(),[3,10];case 9:return c=l.sent(),console.error(c),r.showModal({showError:!0}),B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.sber.error.deepLink,error:c},t.kg.sber.error.deepLink),N(),[3,10];case 10:return[2]}}))}))},r.prototype._startPayment=function(e){this.sendPayment(e)},r.prototype._getPaymentRequest=function(e){},r}(oe),rt=function(){function e(e){this.element=e}return Object.defineProperty(e.prototype,"input",{get:function(){return this.element.getElementsByTagName("input")[0]},enumerable:!1,configurable:!0}),e.prototype.format=function(){this.addDefaultErrorMessage(),this.addInputPlaceholder(),this.addCleaner(),this.addCleanerEvent(),this.addInputBlurEvent()},e.prototype.addCleaner=function(){0===this.element.getElementsByClassName("tui-input__cleaner").length&&(this.element.innerHTML+='<span class="tui-input__content tui-input__cleaner"></span>')},e.prototype.addDefaultErrorMessage=function(){0===this.element.getElementsByClassName("tui-input__error").length&&(this.element.innerHTML+='<span class="tui-input__error">Поле заполнено неверно</span>')},e.prototype.addCleanerEvent=function(){var e=this;this.element.getElementsByClassName("tui-input__cleaner")[0].addEventListener("click",(function(){e.input.value=""}))},e.prototype.addInputBlurEvent=function(){var e=this;this.input.onblur=function(){e.input.classList.add("tui-input__input_touched")}},e.prototype.addInputPlaceholder=function(){this.input.placeholder||(this.input.placeholder=" ")},e}(),ot=function(){function e(e){this.element=e}return Object.defineProperty(e.prototype,"input",{get:function(){return this.element.getElementsByTagName("textarea")[0]},enumerable:!1,configurable:!0}),e.prototype.format=function(){this.addDefaultErrorMessage(),this.addInputBlurEvent(),this.addInputPlaceholder()},e.prototype.addDefaultErrorMessage=function(){0===this.element.getElementsByClassName("tui-input__error").length&&(this.element.innerHTML+='<span class="tui-input__error">Поле заполнено неверно</span>')},e.prototype.addInputBlurEvent=function(){var e=this;this.input.onblur=function(){e.input.classList.add("tui-input__input_touched")}},e.prototype.addInputPlaceholder=function(){this.input.placeholder||(this.input.placeholder=" ")},e}(),it=function(){function e(e){this.element=e}return e.prototype.format=function(){this.exists("input")&&new rt(this.element).format(),this.exists("textarea")&&new ot(this.element).format()},e.prototype.exists=function(e){var t;return(null===(t=this.element.getElementsByTagName(e))||void 0===t?void 0:t.length)>0},e}(),at=function(){function e(){}return e.prototype.initForms=function(){this.forms=Array.from(document.getElementsByClassName("t-form")),this.forms.forEach((function(e){Array.from(e.querySelectorAll("label.tui-input")).map((function(e){return new it(e).format()}))}))},e}(),st=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},ut=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ct=function(){function n(){var n,r=this;this.apiService=te.getInstance(),window.__TinkoffNormalizeMoney=function(e){return Oe(e)},window.doPay=function(e){return r.doPay(e)},window.pay=function(e){return r.pay(e)},window.initPayments=function(e){return r.initPayments(e)},this.widgetVersion=(n=(new ke).getCurrentScript()).src?n.src.indexOf("tinkoff_v2.js")>-1?v.V2:n.src.indexOf("tinkoff.js")>-1?v.V1:null:null,B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.init,userAgent:G,url:U},t.kg.init);var o=new at;if("complete"===document.readyState)return z(),void o.initForms();window.addEventListener("load",(function(){W()||(z(),o.initForms())}))}return n.logAddButton=function(n){B.log(e.FmsLogLevelEnum.INFO,{title:t.kg[n].buttonAddition,userAgent:G,url:U},t.kg[n].buttonAddition)},n.addPaymentButton=function(e,n){if(e)for(var r=0,o=n;r<o.length;r++){var i=o[r];if(i.paymentInfo){var a=e.createPaymentButton(i.paymentInfo);i.container.appendChild(a)}else console.error(t.vU.y0.EZ)}},n.prototype.initPayments=function(r){return st(this,void 0,void 0,(function(){var o,i,a,s,u,c,l,d,f,p,m,h,y,g,v,b=this;return ut(this,(function(P){switch(P.label){case 0:if(B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.initPayments,userAgent:G,url:U},t.kg.initPayments),this.terminalKey=r.terminalKey,o=r.paymentSystems.GooglePay,i=r.paymentSystems.ApplePay,a=r.paymentSystems.TinkoffPay,s=r.paymentSystems.TinkoffFps,u=r.paymentSystems.YandexPay,c=r.paymentSystems.SberPay,!r.paymentSystems||!(o||i||a||s||u||c))return[3,8];P.label=1;case 1:return P.trys.push([1,3,,4]),l=this,[4,this.apiService.getTerminalPayMethods(this.terminalKey)];case 2:return l.terminalPayMethodsInfo=P.sent(),[3,4];case 3:return d=P.sent(),B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.error.terminalPayMethods,error:d},t.kg.error.terminalPayMethods),[3,4];case 4:return P.trys.push([4,6,,7]),[4,this.apiService.getFeatureToggles("eacq/payment_widget")];case 5:return(f=P.sent())&&ge.getInstance().saveFeatureToggleList(f.response.items),[3,7];case 6:return p=P.sent(),B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.error.featureToggles,error:p},t.kg.error.featureToggles),[3,7];case 7:r.paymentItems?(r.paymentItems.forEach((function(e){e.paymentInfo=b._getPaymentInfoFn(e.paymentInfo)})),o&&(n.logAddButton("google"),this.initGooglePay(o).then((function(e){return n.addPaymentButton(e,r.paymentItems)}))),i&&(n.logAddButton("apple"),this.initApplePay(i).then((function(e){return n.addPaymentButton(e,r.paymentItems)}))),a&&(n.logAddButton("tinkoff"),this.initTinkoffPay().then((function(e){return n.addPaymentButton(e,r.paymentItems)}))),c&&(n.logAddButton("sber"),this.initSberPay().then((function(e){return n.addPaymentButton(e,r.paymentItems)}))),u&&(n.logAddButton("yandex"),this.initYandexPay(u,r.container)),s&&(m=r.paymentItems.map((function(e){return{containerId:e.container.id,paymentFn:e.paymentInfo}})),this.addTinkoffFpsScript(m))):(h={container:document.getElementById(r.container),paymentInfo:this._getPaymentInfoFn(r.paymentInfo)},y=function(e,n){var r=b._getPaymentInfoFn(n.paymentInfo);h.paymentInfo||r?e.call(b,n).then((function(e){if(e){var t=e.createPaymentButton(r||h.paymentInfo);h.container.appendChild(t)}})):console.error(t.vU.y0.EZ)},o&&y(this.initGooglePay,o),u&&this.initYandexPay(u,r.container),c&&y(this.initSberPay,c),i&&y(this.initApplePay,i),a&&y(this.initTinkoffPay,a),s&&(g=this._getPaymentInfoFn(s.paymentInfo),v=[{containerId:h.container.id,paymentFn:g}],this.addTinkoffFpsScript(v))),P.label=8;case 8:return[2]}}))}))},n.prototype.doPay=function(e){x()||(I(),this.widgetVersion!==v.V1?(e=Ie(e))?this.createPayment(e):N():this.payV1(e))},n.prototype.pay=function(e){if(!x())if(I(),this.widgetVersion!==v.V1){var t=xe(e);t?this.createPayment(t):N()}else this.payV1(function(e){var t=Te(e.email),n=Te(e.phone),r=Te(e.name),o=Te(e.description),i=Te(e.order),a=Te(e.amount),s=Te(e.frame),u=Te(e.terminalkey),c=Te(e.language),l=Le(Te(e.reccurentPayment)),d=Te(e.customerKey),f={Amount:Fe(a),Description:o,Frame:Le(s),OrderId:i,DATA:"Email=".concat(t,"|Phone=").concat(n,"|Name=").concat(r),TerminalKey:u,Language:c};if(l){if(!d)return alert("При использовании реккурентного платежа поле customerKey не должно быть пустым"),null;f.Recurrent="Y",f.CustomerKey=d}return f}(e))},n.prototype.payV1=function(n){try{n.Amount=Oe(n.Amount)}catch(t){return B.log(e.FmsLogLevelEnum.ERROR,{title:"Ошибка получения суммы платежа"}),console.error(t),void N()}n.DATA?n.DATA+="|Connection_type=Widget2.0":n.DATA="Connection_type=Widget2.0",n.OrderId=n.OrderId||(new Date).getTime().toString(),this.apiService.initV1(n).then((function(r){var o=r.PaymentURL;!n.Frame||de?(B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.redirectToPayForm,userAgent:G,url:U},t.kg.redirectToPayForm),Ce(o)):(B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.openPayFormInFrame,userAgent:G,url:U},t.kg.openPayFormInFrame),Q(o)),N()})).catch((function(n){B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.error.payV1,error:n},t.kg.error.payV1),N(),alert("".concat(t.vU.y0.p," ").concat(t.vU.y0.XK).concat(JSON.stringify(n)))}))},n.prototype.initYandexPay=function(e,t){return st(this,void 0,void 0,(function(){var n,r,o,i,a=this;return ut(this,(function(s){return e&&Ae(this.terminalPayMethodsInfo,u.YandexPay)?(n=Ne(this.terminalPayMethodsInfo,u.YandexPay).Params,r=e.paymentInfo().paymentData,o=Te(r.order),i=Number(Te(r.amount)),[2,Xe.loadYaPayScript(n,e,{orderId:o,amount:i},t).then((function(t){var n=a._getPaymentInfoFn(e.paymentInfo);t.setPaymentFn(n),t.createPaymentButton()}))]):[2,null]}))}))},n.prototype.initGooglePay=function(n){return st(this,void 0,void 0,(function(){var r,i,a;return ut(this,(function(s){switch(s.label){case 0:if(!n)return[2,null];if(!Ae(this.terminalPayMethodsInfo,u.GooglePay))return[2,null];if("TEST"!==(r=n.environment||"TEST")&&"PRODUCTION"!==r)return console.error(t.vU.dv.NZ),[2,null];if("PRODUCTION"===r&&!n.merchantId)return console.error(t.vU.dv.KR),[2,null];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.apiService.getTerminalStatus(this.terminalKey).then((function(e){return e.TerminalStatus}))];case 2:return(i=s.sent())&&i===o.Production?[3,4]:(console.error(t.vU.WF.i),[2,null]);case 3:return a=s.sent(),B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.error.terminalStatus,error:a},t.kg.error.terminalStatus),console.error(t.vU.WF.p),[2,null];case 4:return[2,Ke.loadGooglePayScript(n,r)]}}))}))},n.prototype.initApplePay=function(n){return st(this,void 0,void 0,(function(){var r,o=this;return ut(this,(function(a){switch(a.label){case 0:return n?window.ApplePaySession&&window.ApplePaySession.canMakePayments()?[4,this.apiService.ApplePayMerchantInfo({TerminalKey:this.terminalKey}).then((function(e){return e.MerchantInfo.find((function(e){return e.RegistrationType===i.MassEnabled}))})).catch((function(){return B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.apple.error.merchantInfo,terminalKey:o.terminalKey,userAgent:G,url:U},t.kg.apple.error.merchantInfo),null}))]:(B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.apple.notSupported,userAgent:G,url:U},t.kg.apple.notSupported),console.info(t.um._w.h),[2,null]):[2,null];case 1:return(r=a.sent())&&r.MerchantId&&r.MerchantName?[4,window.ApplePaySession.canMakePaymentsWithActiveCard(r.MerchantId)]:(B.log(e.FmsLogLevelEnum.INFO,{title:"Нет информации об Apple Pay для сайта"}),console.error(t.vU._w.um),[2,null]);case 2:return a.sent()?(n.merchantInfo=r,[2,new De(n)]):(B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.apple.noActiveCard,userAgent:G,url:U},t.kg.apple.noActiveCard),console.info(t.um._w.I),[2,null])}}))}))},n.prototype.initTinkoffPay=function(){var e;return st(this,void 0,void 0,(function(){var n,r;return ut(this,(function(o){return n=Ae(this.terminalPayMethodsInfo,u.TinkoffPay),r=null===(e=Ne(this.terminalPayMethodsInfo,u.TinkoffPay))||void 0===e?void 0:e.Params,n?[2,new Se(r)]:(console.error(t.kg.tinkoff.error.allow),[2,null])}))}))},n.prototype.initSberPay=function(){var e;return st(this,void 0,void 0,(function(){var n,r;return ut(this,(function(o){return n=Ae(this.terminalPayMethodsInfo,u.SberPay),r=null===(e=Ne(this.terminalPayMethodsInfo,u.SberPay))||void 0===e?void 0:e.Params,n?[2,new nt(r)]:(console.error(t.kg.sber.error.allow),[2,null])}))}))},n.prototype.createPayment=function(n){this.apiService.init(n).then((function(r){var o=r.PaymentURL;!n.Frame||de?(B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.redirectToPayForm,userAgent:G,url:U},t.kg.redirectToPayForm),Ce(o)):(B.log(e.FmsLogLevelEnum.INFO,{title:t.kg.openPayFormInFrame,userAgent:G,url:U},t.kg.openPayFormInFrame),Q(o),N())})).catch((function(n){B.log(e.FmsLogLevelEnum.ERROR,{title:t.kg.error.pay,error:n},t.kg.error.pay),N(),alert("".concat(t.vU.y0.p," ").concat(t.vU.y0.XK).concat(JSON.stringify(n)))}))},n.prototype.addTinkoffFpsScript=function(e){var t=this;_e("".concat(P.HOST_URL,"/fpsWidget/fpsButton.js"),(function(){return window.TinkoffFpsButton.initTinkoffFps(e)}),(function(n){setTimeout((function(){return t.addTinkoffFpsScript(e)}),1e3)}))},n.prototype._processPaymentInfo=function(e){return e.paymentData=e.paymentData instanceof HTMLFormElement?xe(e.paymentData):Ie(e.paymentData),e.paymentData&&(e.paymentData.TerminalKey=this.terminalKey),e},n.prototype._getPaymentInfoFn=function(e){var t=this;if(!e)return null;if("function"!=typeof e){var n=this._processPaymentInfo(e);return function(){return n}}return function(){return t._processPaymentInfo(e())}},n}();window.TinkoffWidget?B.log(e.FmsLogLevelEnum.INFO,{title:"Повторная инициализация виджета",userAgent:G,url:U},"Повторная инициализация виджета"):window.TinkoffWidget=new ct})();var o=self;for(var i in r)o[i]=r[i];r.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();